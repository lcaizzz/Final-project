---
title: "STEAM Apps: User Engagement & Review Attitudes"
author: "Cai Le, Clara Kim, Yutong Wei, Sybil Kong, Tracy He"
date: "2024-05-03"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(kableExtra)
library(tidyverse)
library(lubridate)
library(scales)  
library(ggplot2)
library(dplyr)
```

# Introduction

We found a dataset with information about over 100 million Steam reviews and proposed a question: **"How does the relationship between user engagement with Steam apps and their attitudes toward app reviews inform strategies for product improvement and market targeting?"**

We used CHTC for parallel processing to segment the dataset by language and review attitude and calculate averages like author playtime forever and at review, taking a total of 10 minutes. Our visualizations revealed variations in user engagement across languages, apps, and sentiments. Key findings, such as the link between positive reviews and longer playtimes, highlight user satisfaction's role in app usage, providing insights for improving apps and engagement strategies.



# Analysis report

## Dataset

The original data set (43.19GB) consists of 100 Million+ Steam Reviews[website](https://www.kaggle.com/datasets/kieranpoc/steam-reviews/data?select=weighted_score_above_08.csv). We focused on the relationship between users’ engagement with Steam apps and attitudes toward app reviews. 

```{r, echo = FALSE}
key_variables = tibble(
  Name = c("Game", "author_steamid", "author _playtime_forever", "author _playtime_at_review", "Language", "voted_up"),
  Description = c("The game name corresponding to the appid",
                  "the user’s SteamID",
                  "playtime tracked in the past two weeks for this app",
                  "playtime when the review was written",
                  "language the user indicated when authoring the review",
                  "if the review was positive or negative（generated by steam)"))

key_variables %>% 
  kable(caption = "Key Variables from 100 Million+ Steam Reviews Dataset") %>% 
  kable_styling(position = "left", full_width = FALSE,
                bootstrap_options = c("striped"))
```


## Statistical Computation and Findings

### 1st Data Segmentation

We splitted the original dataset by languages a review was written in.

**Distributions Over Language areas**


```{r, echo = FALSE}
# waffle 1
df_grid <- read.csv('df_grid_top5.csv')

n_rows <- 10
n_columns <- ceiling(100 / n_rows)

ggplot(df_grid, aes(x = y, y = x, fill = category)) +
  geom_tile(color = "black", linewidth = 0.5) +
  coord_fixed(ratio = n_rows / n_columns) +
  scale_fill_brewer(palette = "Set3") + 
  labs(title="Waffle Chart of Languages by Number of Reviews") +
  theme_void() +
  theme(legend.position = "right") 
```


We calculated the total number of reviews per language area. The graph shows that most reviews were written in English, followed by simplified Chinese, Russian, Spanish, Brazilian. 
Following this visualization, we decided to compare authors’ average playtime by languages.


**User Engagement by Language areas**


We ran 29 jobs in parallel on CHTC with a disk and memory request of 3.64 GB for 7 minutes to calculate the average author playtime forever and the average author playtime at review of the top 10 apps for each language area.


```{r, echo = FALSE, out.width='50%'}
## barplot
create_barplot <- function(csv_file, title) {
  data <- read.csv(csv_file, stringsAsFactors = FALSE)
  p <- ggplot(data, aes(x = reorder(game, -Average), y = Average, fill = Average)) + 
  geom_bar(stat = "identity") +
  scale_fill_gradient(low = "lightblue", high = "blue", 
                      labels = label_comma()) + 
  scale_y_continuous(labels = label_comma()) +
  labs(title = title, x = "App Name", y = "Average Playtime (minutes)") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust=1), plot.title = element_text(size = 12, face = "bold"))

  print (p)
}

playtime_forever <- c(
  "top10_author_playtime_forever_schinese.csv",
  "top10_author_playtime_forever_english.csv"
)

playtime_at_review <- c(
  "top10_author_playtime_at_review_schinese.csv",
  "top10_author_playtime_at_review_english.csv"
)

titles_1 <- c(
  "Apps with Top10 Average Playtime Forever - Simplified Chinese",
  "Apps with Top10 Average Playtime Forever - English"
)

titles_2 <- c(
  "Apps with Top10 Average Playtime at Review - Simplified Chinese",
  "Apps with Top10 Average Playtime at Review - English"
)

for (i in seq_along(playtime_forever)) {
  create_barplot(playtime_forever[i], titles_1[i])
}
```



The English barplot displays a more varied range with the top few apps having significantly higher average playtimes, suggesting concentrated app preferences, whereas the Simplified Chinese barplot shows a gradual decline in playtime across apps, indicating a broader range of interests by Chinese reviewers.


```{r, echo = FALSE, out.width='50%'}
for (i in seq_along(playtime_forever)) {
  create_barplot(playtime_at_review[i], titles_2[i])
}
```


In both barplots, the top 1 app stands out, meaning that it has a particularly dedicated user base in the language area.


**Case Study -“Yolomouse”**


We calculated the apps’ average author playtime forever and number of reviewers in each language area.


```{r, echo = FALSE}
data <- read.table(header=TRUE, text="
game,language,avg_author_playtime_forever,number_of_players
YoloMouse,brazilian,187958,30
YoloMouse,czech,75584.4,5
YoloMouse,dutch,173413,6
YoloMouse,english,207517,797
YoloMouse,finnish,246188,2
YoloMouse,french,144758,30
YoloMouse,german,189978,87
YoloMouse,greek,219131,3
YoloMouse,italian,147768,6
YoloMouse,japanese,587825,5
YoloMouse,koreana,229321,57
YoloMouse,latam,326131,7
YoloMouse,norwegian,3705,1
YoloMouse,polish,273036,10
YoloMouse,portuguese,263054,1
YoloMouse,romanian,135931,3
YoloMouse,russian,194546,34
YoloMouse,schinese,120224,266
YoloMouse,spanish,190499,32
YoloMouse,swedish,212858,3
YoloMouse,tchinese,283027,36
YoloMouse,thai,300054,5
YoloMouse,turkish,102366,10
YoloMouse,ukrainian,66035,1
YoloMouse,world_average,191483,59.88
", sep=",")

world_avg_playtime <- 191483
world_avg_players <- 59.88

max_deviation_playtime <- max(abs(data$avg_author_playtime_forever - world_avg_playtime))
max_deviation_players <- max(abs(data$number_of_players - world_avg_players))


x_limits <- c(world_avg_players - max_deviation_players, world_avg_players + max_deviation_players)
y_limits <- c(world_avg_playtime - max_deviation_playtime, world_avg_playtime + max_deviation_playtime)



p <- ggplot(data, aes(x=number_of_players, y=avg_author_playtime_forever, color=language)) +
  geom_point(size = 3) +
  geom_text(aes(label=language), hjust=1.2, vjust=1.2, size=2.5, check_overlap = TRUE) +  # Add small text labels for language
  geom_hline(yintercept = world_avg_playtime, linetype="solid", color = "black") +
  geom_vline(xintercept = world_avg_players, linetype="solid", color = "black") +
  coord_cartesian(xlim = x_limits, ylim = y_limits) +
  scale_y_continuous(labels = label_comma()) +
  labs(title="Scatterplot Centered on World Averages - YoloMouse", 
       x="Number of Review Authors", 
       y="Average Author Playtime Forever (minutes)") +
  theme_minimal()
print(p)
```


The plot took the app “Yolomouse” as an example. Some significant points are that the English area has a larger and more engaging user base, the Japanese area has a smaller but highly engaging user base, the Norwegian area has a smaller and less engaged user base, and simplified Chinese has a larger but less engaged user base.



### Direct Analysis

We calculated average author playtime forever and average author playtime at review for each app using the original data.


**User Engagement by Different Apps**


```{r, echo = FALSE}
## lineplot 1
data <- data.frame(
    App = factor(c('PUT IN BAD', '黑色沙漠(失效)', 'Going Medieval', 'YoloMouse', 'Sakura TTS', 'Anime Tanks Arena
'),
             levels = c('PUT IN BAD', '黑色沙漠(失效)', 'Going Medieval', 'YoloMouse', 'Sakura TTS', 'Anime Tanks Arena
')),

average_author_playtime_forever = c(87406, 95377.6, 133835, 212052, 424708
, 429476
),
average_playtime_at_review = c(87406, 40728.1, 128866, 72604.9, 66498, 142154)

)

data$AppID <- seq_along(data$App)

data$ShorterPlaytime <- ifelse(data$average_author_playtime_forever < data$average_playtime_at_review, 
                               data$average_author_playtime_forever, 
                               data$average_playtime_at_review)

p <- ggplot(data, aes(x = AppID)) +
    geom_segment(aes(xend = AppID, y = 0, yend = average_author_playtime_forever, colour = "Average Author Playtime Forever"), linewidth = 10) +
    geom_segment(aes(xend = AppID, y = 0, yend = average_playtime_at_review, colour = "Average Author Playtime at Review"), linewidth = 10) +
    geom_point(aes(y = ShorterPlaytime), shape = 18, size = 7, color = "black") +
    scale_x_continuous(breaks = data$AppID, labels = data$App) +
    labs(
        title = "Comparison of Average Playtime for Different Apps",
        x = "App Name",
        y = "Average Playtime (minutes)",
        colour = "Legend"
    ) +
    theme_minimal() +
    theme(
        legend.position = "bottom",
        axis.text.x = element_text(angle = 45, hjust = 1, size = 12),
        axis.text.y = element_text(face = "bold", size = 12),
        axis.title.x = element_text(size = 15),
        axis.title.y = element_text(size = 15),
        legend.text = element_text(size = 8), 
        axis.ticks.y = element_blank(),
        plot.title = element_text(hjust = 0.5, face = "bold", size = 8)
    ) +
    scale_y_continuous(labels = scales::comma) +
    coord_flip()

print(p)
```


The black diamond symbol on each line indicates the point at which the average author playtime forever exceeds the average author playtime at review. We found that the lower the ratio between average author playtime at review and average author playtime forever, the higher the retention rate after the initial review, or the earlier the user developed a preference for the app.



### 2nd Data Segmentation

We filtered the game “Yolomouse” ’s author_playtime_forever and author_playtime_at_review then splitted by the variable “voted_up” into 2 types’ review dataset. 

**User Engagement by Review Attitudes**

We ran 2 jobs in parallel on CHTC with a disk and memory request of 0.27 GB for 3 minutes to calculate the average of author_playtime_forever and author_playtime_at_review for each type of review.


```{r, echo = FALSE}
## lineplot 2
data <- data.frame(
    App = factor(c('YoloMouse_negative_reviews', 'YoloMouse_positive_reviews'),
                 levels = c('YoloMouse_negative_reviews', 'YoloMouse_positive_reviews')),
    average_author_playtime_forever = c(148837.8, 197843.5),
    average_playtime_at_review = c(34532, 68770)
)

data$AppID <- seq_along(data$App)

data$ShorterPlaytime <- ifelse(data$average_author_playtime_forever < data$average_playtime_at_review, 
                               data$average_author_playtime_forever, 
                               data$average_playtime_at_review)

p <- ggplot(data, aes(x = AppID)) +
    geom_segment(aes(xend = AppID, y = 0, yend = average_author_playtime_forever, colour = "Average Author Playtime Forever"), linewidth = 10) +
    geom_segment(aes(xend = AppID, y = 0, yend = average_playtime_at_review, colour = "Average Author Playtime at Review"), linewidth = 10) +
    geom_point(aes(y = ShorterPlaytime), shape = 18, size = 7, color = "black") +
    scale_x_continuous(breaks = data$AppID, labels = data$App) +
    labs(
        title = "Comparison of Average Playtime for Different Reviews - YoloMouse",
        x = "Type of Reviews",
        y = "Average Playtime (minutes)",
        colour = "Legend"
    ) +
    theme_minimal() +
    theme(
        legend.position = "bottom",
        axis.text.x = element_text(angle = 45, hjust = 1, size = 12),
        axis.text.y = element_text(face = "bold", size = 12),
        axis.title.x = element_text(size = 15),
        axis.title.y = element_text(size = 15),
        legend.text = element_text(size = 8), 
        axis.ticks.y = element_blank(),
        plot.title = element_text(hjust = 0.5, face = "bold", size = 8)
    ) +
    scale_y_continuous(labels = scales::comma) +
    coord_flip()

print(p)
```


It shows that YoloMouse’s positive reviewers tend to keep using the app for longer before leaving their review compared to the negative reviewers. It is also notable that both positive and negative reviewers often continue to use the app after their reviews.

### Limitations

-The impact of regional policies on players represents an unavoidable confounding variable.

-The variables about playtime might be confounding variables which might include the background runtime of users.



## Conclusion
Our analysis uncovered key insights into user engagement and review attitudes, highlighting variations across different language areas and specific apps. English-speaking users demonstrated concentrated engagement in top apps, while Chinese-speaking users showed a broader interest spread. The "Yolomouse" case study highlighted differences in engagement levels across demographics, with English and Japanese users being highly engaged compared to Norwegian and Chinese users. Our findings also indicate that positive reviews correlate with longer playtimes both before and after reviews, suggesting that user satisfaction greatly influences continued app usage. These insights are crucial for developers and marketers aiming to enhance content and improve engagement strategies on the Steam platform. Future analyses will include a larger and more diverse range of apps and language areas to provide more comprehensive recommendations for app localization and development.

**git clone git@github.com:lcaizzz/Final-project.git**

```{r, echo = FALSE}
contributions = tibble(
  Member = c("Cai Le", "Clara Kim", "Yutong Wei", "Sybil Kong", "Tracy He"),
  Proposal = c(1, 1, 1, 1, 1),
  Coding = c(1, 1, 1, 1, 1),
  Presentation = c(1, 1, 1, 1, 1),
  Report = c(1, 1, 1, 1, 1))

contributions %>% 
  kable(caption = "Contributions of Members") %>% 
  kable_styling(position = "left", full_width = FALSE,
                bootstrap_options = c("striped"))
```



